(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TradesLite"],{"023f":function(t,e,s){t.exports=s.p+"img/COINBASE.8a95d742.svg"},"024c":function(t,e,s){"use strict";var i=s("9ab4"),n=s("2b0e"),a=s("2fe1");let o=class extends n["default"]{get pane(){return this.$store.state.panes.panes[this.paneId]}mounted(){this.$el.id=this.paneId,this.refreshZoom(),this.$nextTick(()=>{const t=this.$el.clientWidth;"function"===typeof this.onResize&&this.onResize(t,this.$el.clientHeight,!0)}),this.$el.addEventListener("mousedown",this.focusPane)}beforeDestroy(){this.$el.removeEventListener("mousedown",this.focusPane),this._onStoreMutation&&this._onStoreMutation()}refreshZoom(){this.$store.dispatch("panes/refreshZoom",{id:this.paneId})}focusPane(){this.$store.commit("app/SET_FOCUSED_PANE",this.paneId)}};o=Object(i["a"])([Object(a["b"])({props:{paneId:{required:!0,type:String}}})],o),e["a"]=o},"0e41":function(t,e,s){t.exports=s.p+"img/POLONIEX.ba8cf03b.svg"},"2d55":function(t,e,s){t.exports=s.p+"img/GATEIO.4c195401.svg"},"2ecc":function(t,e,s){t.exports=s.p+"img/MEXC.2b84ab8a.svg"},"376b":function(t,e,s){t.exports=s.p+"img/DERIBIT.21f26f1e.svg"},4471:function(t,e,s){"use strict";s("4487")},4487:function(t,e,s){},"4fdd":function(t,e,s){t.exports=s.p+"img/PHEMEX.4a159b28.svg"},"53bd":function(t,e,s){t.exports=s.p+"img/UNISWAP.79f4171b.svg"},"5a5d":function(t,e,s){t.exports=s.p+"img/KUCOIN.9c6f798e.svg"},6121:function(t,e,s){t.exports=s.p+"img/DYDX.ccb806be.svg"},8846:function(t,e,s){t.exports=s.p+"img/HITBTC.c82e309c.svg"},"8c91":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"pane-header hide-scrollbar d-flex",class:[t.split&&"pane-header--split"],on:{dblclick:t.maximizePane}},[t.showName&&t.name?e("div",{staticClass:"pane-header__name pane-overlay",on:{dblclick:t.renamePane}},[t._t("title",(function(){return[t._v(" "+t._s(t.name)+" ")]}))],2):t._e(),e("div",{staticClass:"toolbar pane-overlay"},[t._t("default"),t.showSearch?e("button",{staticClass:"btn toolbar__label toolbar__label--768 -text",attrs:{type:"button"},on:{click:t.openSearch}},[e("i",{staticClass:"icon-search"})]):t._e(),t.settings?e("btn",{staticClass:"toolbar__label toolbar__label--768 -text",attrs:{type:"button",loading:t.isLoading},on:{click:t.openSettings}},[e("i",{staticClass:"icon-cog"})]):t._e(),e("button",{staticClass:"btn -text toolbar__label",attrs:{type:"button"},on:{click:t.toggleDropdown}},[e("i",{staticClass:"icon-more"})]),e("dropdown",{model:{value:t.paneDropdownTrigger,callback:function(e){t.paneDropdownTrigger=e},expression:"paneDropdownTrigger"}},[e("div",{staticClass:"d-flex btn-group"},[e("button",{staticClass:"btn -green",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.changeZoom(e,-1)}}},[e("i",{staticClass:"icon-minus"})]),e("button",{staticClass:"btn -green text-monospace flex-grow-1 text-center",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.resetZoom.apply(null,arguments)}}},[t._v(" √ó "+t._s(t.zoom.toFixed(2))+" ")]),e("button",{staticClass:"btn -green",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.changeZoom(e,1)}}},[e("i",{staticClass:"icon-plus"})])]),null!==t.settings?e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.openSettings}},[e("i",{staticClass:"icon-cog"}),e("span",[t._v("Settings")])]):t._e(),t.showSearch?e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.openSearch}},[e("i",{staticClass:"icon-search"}),e("span",[t._v("Sources")])]):t._e(),t.$slots.menu?e("div",{staticClass:"dropdown-divider",attrs:{"data-label":t.paneId+" options"}}):t._e(),t._t("menu"),e("div",{staticClass:"dropdown-divider",attrs:{"data-label":"utilities"}}),e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.maximizePane}},[e("i",{staticClass:"icon-enlarge"}),e("span",[t._v("Maximize")])]),e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.duplicatePane}},[e("i",{staticClass:"icon-copy-paste"}),e("span",[t._v("Duplicate")])]),e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.downloadPane}},[e("i",{staticClass:"icon-download"}),e("span",[t._v("Download")])]),e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.renamePane}},[e("i",{staticClass:"icon-edit"}),e("span",[t._v("Rename")])]),e("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:t.removePane}},[e("i",{staticClass:"icon-trash"}),e("span",[t._v("Remove")])])],2)],2)])},n=[],a=s("9ab4"),o=s("2b0e"),r=s("2fe1"),h=s("017a"),l=s("28f3"),d=s("0c01");let c=class extends o["default"]{constructor(){super(...arguments),this.paneDropdownTrigger=null,this.isLoading=!1}get zoom(){return this.$store.state.panes.panes[this.paneId].zoom||1}get type(){return this.$store.state.panes.panes[this.paneId].type}get name(){const t=this.$store.state.panes.panes[this.paneId].name,e=this.$store.state.panes.marketsListeners[this.$store.state.panes.panes[this.paneId].markets[0]];return t?t.trim():e?e.local:this.type}openSearch(){this.$store.dispatch("app/showSearch",{paneId:this.paneId})}changeZoom(t,e){const s=this.zoom+(t.shiftKey?.0625:.125)*e;this.$store.dispatch("panes/setZoom",{id:this.paneId,zoom:s}),this.$emit("zoom",s)}resetZoom(){this.$store.dispatch("panes/setZoom",{id:this.paneId,zoom:1}),this.$emit("zoom",1)}async removePane(){await d["a"].confirm(`Delete pane ${this.type} "${this.name}" ?`)&&this.$store.dispatch("panes/removePane",this.paneId)}duplicatePane(){this.$store.dispatch("panes/duplicatePane",this.paneId)}maximizePane(t){if("dblclick"===t.type&&t.currentTarget!==t.target)return;const e=this.$el.parentElement.parentElement,s=e.classList.toggle("-maximized"),i=Object(l["p"])(e);for(const a of i)a.getAttribute("type")&&(a.classList.remove("-maximized"),a.style.display=s?"none":"block");const n=Event;window.dispatchEvent(new n("resize")),this.$store.dispatch("panes/refreshZoom",{id:this.paneId,zoom:s?2:this.zoom})}async renamePane(t){t&&t.stopPropagation();const e=await d["a"].prompt({action:"Rename",input:this.name});"string"===typeof e&&e!==this.name&&this.$store.commit("panes/SET_PANE_NAME",{id:this.paneId,name:e})}async downloadPane(){Object(l["g"])({name:`${this.type}:${this.paneId}`,type:this.type,data:this.$store.state[this.paneId],markets:this.$store.state.panes.panes[this.paneId].markets,createdAt:Date.now(),updatedAt:null},Object(l["z"])(this.paneId))}toggleDropdown(t){this.paneDropdownTrigger?this.paneDropdownTrigger=null:this.paneDropdownTrigger=t.currentTarget}async openSettings(){this.settings&&(this.isLoading=!0,d["a"].open((await this.settings()).default,{paneId:this.paneId}),this.isLoading=!1)}};c=Object(a["a"])([Object(r["b"])({name:"PaneHeader",props:{paneId:{type:String},settings:{type:Function,default:null},showSearch:{type:Boolean,default:!0},showName:{type:Boolean,default:!0},split:{type:Boolean,default:!0}},components:{Btn:h["a"]}})],c);var p=c,u=p,g=s("2877"),m=Object(g["a"])(u,i,n,!1,null,null,null);e["a"]=m.exports},"8d6c":function(t,e,s){t.exports=s.p+"img/BITFINEX.4a8ca8e7.svg"},"96a0":function(t,e,s){t.exports=s.p+"img/HUOBI.44809724.svg"},ac67:function(t,e,s){t.exports=s.p+"img/BINANCE_US.644dead4.svg"},b033:function(t,e,s){t.exports=s.p+"img/BYBIT.cd62d320.svg"},bd5c:function(t,e,s){t.exports=s.p+"img/BINANCE_FUTURES.605bd038.svg"},bfd2:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"pane-trades",on:{mouseenter:t.bindScroll}},[e("pane-header",{ref:"paneHeader",attrs:{paneId:t.paneId,settings:()=>s.e("chunk-40d8aefc").then(s.bind(null,"34c1"))},on:{zoom:t.onResize}},[t.market?e("dropdown",{attrs:{interactive:"","no-scroll":""},model:{value:t.sliderDropdownTrigger,callback:function(e){t.sliderDropdownTrigger=e},expression:"sliderDropdownTrigger"}},[e("slider",{staticStyle:{width:"100px"},attrs:{min:0,max:10,step:.01,label:"","show-completion":!1,gradient:t.gradient,value:t.thresholdsMultipler,log:""},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLDS_MULTIPLER",{value:e,market:t.market})},reset:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLDS_MULTIPLER",{value:1,market:t.market})}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(+(100*t.thresholdsMultipler).toFixed(2))+"% ")]},proxy:!0}],null,!1,1845412583)})],1):t._e(),e("button",{staticClass:"toolbar__label",attrs:{name:t.paneId},on:{click:function(e){t.sliderDropdownTrigger=t.sliderDropdownTrigger?null:e.currentTarget}}},[e("i",{staticClass:"icon-gauge"})])],1),t.paused?e("code",{staticClass:"pane-trades__paused"},[t._v(" "+t._s(t.paused)+" ")]):t._e(),e("canvas",{ref:"canvas",on:{dblclick:t.prepareEverything}})],1)},n=[],a=s("9ab4"),o=s("60a3"),r=s("024c"),h=s("a914"),l=s("06c2"),d=s("fa07"),c=s("7ab0"),p=s("8c91"),u=s("0c01"),g=s("4902"),m=s("efac"),f=s.n(m),b=s("bd5c"),y=s.n(b),x=s("ac67"),T=s.n(x),w=s("b033"),S=s.n(w),I=s("023f"),O=s.n(I),E=s("96a0"),H=s.n(E),_=s("376b"),v=s.n(_),C=s("d1e0"),B=s.n(C),A=s("0e41"),$=s.n(A),R=s("8846"),k=s.n(R),D=s("d37d"),M=s.n(D),P=s("cbc7"),j=s.n(P),L=s("4fdd"),z=s.n(L),N=s("8d6c"),U=s.n(N),V=s("6121"),W=s.n(V),X=s("fb9f"),F=s.n(X),G=s("53bd"),q=s.n(G),K=s("5a5d"),Z=s.n(K),Y=s("fd18"),J=s.n(Y),Q=s("2ecc"),tt=s.n(Q),et=s("2d55"),st=s.n(et),it=s("f7bc"),nt=s.n(it),at={BINANCE:f.a,BINANCE_FUTURES:y.a,BINANCE_US:T.a,BYBIT:S.a,COINBASE:O.a,HUOBI:H.a,DERIBIT:v.a,OKEX:B.a,POLONIEX:$.a,HITBTC:k.a,BITSTAMP:M.a,BITMEX:j.a,PHEMEX:z.a,BITFINEX:U.a,DYDX:W.a,KRAKEN:F.a,UNISWAP:q.a,KUCOIN:Z.a,BITGET:J.a,MEXC:tt.a,GATEIO:st.a,CRYPTOCOM:nt.a};const ot=!1,rt=5,ht={};var lt;(function(t){t[t["trade"]=0]="trade",t[t["liquidation"]=1]="liquidation"})(lt||(lt={}));let dt=class extends(Object(o["b"])(r["a"])){constructor(){super(...arguments),this.batchSize=1,this.sliderDropdownTrigger=null,this.paused=0}get market(){return this.pane.markets[0]}get thresholdsMultipler(){return this.$store.state[this.paneId].thresholdsMultipler}get gradient(){return[this.$store.state[this.paneId].thresholds[0].buyColor,this.$store.state[this.paneId].thresholds[this.$store.state[this.paneId].thresholds.length-1].buyColor]}created(){this._onStoreMutation=this.$store.subscribe(t=>{switch(t.type){case"panes/SET_PANE_MARKETS":t.payload.id===this.paneId&&(this.clear(),this.prepareMarkets(),this.renderHistory());break;case"app/EXCHANGE_UPDATED":case this.paneId+"/SET_MAX_ROWS":case this.paneId+"/TOGGLE_PREFERENCE":this.prepareTypeFilter(!0),this.prepareDisplaySettings(),this.renderHistory();break;case this.paneId+"/SET_THRESHOLD_AUDIO":case this.paneId+"/SET_AUDIO_VOLUME":case this.paneId+"/SET_AUDIO_PITCH":case this.paneId+"/TOGGLE_MUTED":case"settings/SET_AUDIO_VOLUME":case"settings/TOGGLE_AUDIO":this.prepareAudio();break;case this.paneId+"/SET_AUDIO_THRESHOLD":this.prepareAudio(!1);break;case"settings/SET_BACKGROUND_COLOR":case this.paneId+"/SET_THRESHOLD_COLOR":case this.paneId+"/SET_THRESHOLD_AMOUNT":case this.paneId+"/SET_THRESHOLDS_MULTIPLER":case this.paneId+"/TOGGLE_THRESHOLD_MAX":case this.paneId+"/DELETE_THRESHOLD":case this.paneId+"/ADD_THRESHOLD":this.prepareColors(),this.renderHistory(),t.type!==this.paneId+"/DELETE_THRESHOLD"&&t.type!==this.paneId+"/SET_THRESHOLDS_MULTIPLER"&&t.type!==this.paneId+"/ADD_THRESHOLD"||this.prepareAudio();break}})}mounted(){this.ctx=this.$refs.canvas.getContext("2d",{alpha:!1}),this.$nextTick(this.prepareEverything),h["a"].on("trades",this.onTrades)}async prepareEverything(){this.reset(),this.prepareTypeFilter(),this.prepareMarkets(),this.prepareColors(),await this.prepareAudio(),this.renderHistory()}beforeDestroy(){h["a"].off("trades",this.onTrades),this._onStoreMutation(),this.blurHandler&&this.onBlur()}onTrades(t){let e=null,s=null;for(let i=0;i<t.length;i++){const n=t[i].exchange+":"+t[i].pair,a=t[i].liquidation?lt.liquidation:lt.trade;if(!this.filters[a]||!this.paneMarkets[n])continue;if(t[i].amount<this.colors[a].minAmount||t[i].amount>this.colors[a].maxAmount){t[i].amount>this.minAudio&&this.sounds[a][0][t[i].side](g["d"],t[i].amount/this.colors[a].significantAmount),this.insignificantVolumeBySide[t[i].side]+=t[i].amount;continue}this.volumeBySide[t[i].side]+=t[i].amount,null===s&&(s=t[i].side);const{background:o,color:r,step:h}=this.getColors(t[i].amount,t[i].side,a);this.maxCount=Math.max(this.maxCount,t[i].count);const l={type:a,background:o,color:r,step:h,exchange:t[i].exchange,pair:t[i].pair,amount:t[i].amount,count:t[i].count,price:t[i].price,side:t[i].side,time:null};e||(e=new Date(+t[i].timestamp),l.time=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`),l.amount>this.minAudio&&this.sounds[a][Math.floor(l.step/rt)][l.side](g["d"],l.amount/this.colors[a].significantAmount),this.tradesRendering.push(l)}e&&!this.rendering&&(this.volumeBySide[s]+=this.insignificantVolumeBySide[s],this.addedVolumeBySide[s]+=this.insignificantVolumeBySide[s],this.insignificantVolumeBySide[s]=0,this.renderTradesBatch()),this.renderVolumeBySide()}getThresholdsByType(t){const e=this.$store.state[this.paneId];return t===lt.liquidation?e.liquidations:e.thresholds}async openSettings(){u["a"].open((await s.e("chunk-40d8aefc").then(s.bind(null,"34c1"))).default,{paneId:this.paneId})}async prepareTypeFilter(t){if(this.filters={[lt.trade]:this.$store.state[this.paneId].showTrades,[lt.liquidation]:this.$store.state[this.paneId].showLiquidations},t)for(const e in this.filters)this.filters[e]||"undefined"===typeof this.colors[e]?this.filters[e]&&"undefined"===typeof this.colors[e]&&this.prepareThresholds(e,this.getThresholdsByType(e)):delete this.colors[e],this.filters[e]||"undefined"===typeof this.sounds[e]?this.filters[e]&&"undefined"===typeof this.sounds[e]&&this.minAudio>0&&await this.prepareSounds(e,this.getThresholdsByType(+e)):delete this.sounds[e];for(let e=0;e<this.tradesHistory.length;e++)this.filters[this.tradesHistory.type]||(this.tradesHistory.splice(e,1),e--)}prepareMarkets(){this.paneMarkets=this.$store.state.panes.panes[this.paneId].markets.reduce((t,e)=>{const[s]=e.split(":");return this.$store.state.app.activeExchanges[s]?(t[e]=!0,t):(t[e]=!1,t)},{})}async prepareAudio(t=!0){const e=this.$store.state[this.paneId].audioThreshold;if(!this.$store.state.settings.useAudio||this.$store.state[this.paneId].muted||0===this.$store.state[this.paneId].audioVolume)return this.minAudio=1/0,void(this.sounds={});if(e?"string"===typeof e&&/\d\s*%$/.test(e)?this.minAudio=this.minAmount*(parseFloat(e)/100):this.minAudio=+e:this.minAudio=.1*this.minAmount,t)for(const s in this.filters)this.filters[s]&&await this.prepareSounds(s,this.getThresholdsByType(+s))}async prepareSounds(t,e){const s=[],i=this.$store.state[this.paneId].audioPitch;for(let n=0;n<e.length;n++)s.push({buy:await g["d"].buildAudioFunction(e[n].buyAudio,"buy",i),sell:await g["d"].buildAudioFunction(e[n].sellAudio,"sell",i)});this.sounds[t]=s}prepareColors(){const t=getComputedStyle(document.documentElement);let e;this.themeBase=t.getPropertyValue("--theme-base"),e=this.filters[lt.trade]?this.$store.state[this.paneId].thresholds[this.$store.state[this.paneId].thresholds.length-2]:this.$store.state[this.paneId].liquidations[this.$store.state[this.paneId].thresholds.length-2],this.buyColorBase=e.buyColor,this.buyColor100=Object(d["j"])(Object(d["f"])(Object(d["l"])(this.buyColorBase),.25)),this.sellColorBase=e.sellColor,this.sellColor100=Object(d["j"])(Object(d["f"])(Object(d["l"])(this.sellColorBase),.25));for(const s in this.filters)this.filters[s]&&this.prepareThresholds(s,this.getThresholdsByType(+s));for(let s=0;s<this.tradesHistory.length;s++){if(this.tradesHistory[s].amount<this.minAmount){this.tradesHistory.splice(s,1),s--;continue}const t=this.getColors(this.tradesHistory[s].amount,this.tradesHistory[s].side,this.tradesHistory[s].type);Object.assign(this.tradesHistory[s],t)}}prepareThresholds(t,e){const s=Object(d["l"])(this.themeBase),i=Object(d["b"])(),n=[];let a;const o=e.length*rt;for(let c=0;c<e.length-1;c++){const t=e[c].amount,r=e[c+1].amount;0===c&&(a=r);const h=Object(d["l"])(e[c].buyColor),l=Object(d["l"])(e[c+1].buyColor),p="undefined"===typeof h[3]?1:h[3],u=[Object(d["k"])(h,i),Object(d["k"])(l,i)],g=[Object(d["k"])(h,s),Object(d["k"])(l,s)],m=Object(d["l"])(e[c].sellColor),f=Object(d["l"])(e[c+1].sellColor),b="undefined"===typeof m[3]?1:m[3],y=[Object(d["k"])(m,i),Object(d["k"])(f,i)],x=[Object(d["k"])(m,s),Object(d["k"])(f,s)],T=[],w=[];for(let e=0;e<rt;e++){const t=e/(rt-1),s=Object(d["d"])(u[0],u[1],t),i=Object(d["d"])(g[0],g[1],t),n=Object(d["g"])(i,.5+Math.min(1,(c*rt+e)/o),Math.exp(1-p)/5);T.push({background:Object(d["j"])(s),color:Object(d["j"])(n),step:c*rt+e});const a=Object(d["d"])(y[0],y[1],t),r=Object(d["d"])(x[0],x[1],t),h=Object(d["g"])(r,.5+Math.min(1,(c*rt+e)/o),Math.exp(1-b)/5);w.push({background:Object(d["j"])(a),color:Object(d["j"])(h),step:c*rt+e})}if(n.push({from:t,to:r,buy:T,sell:w}),e[c+1].max){n[n.length-1].max=!0;break}}const r=n.length-1,h=n[0].from;let l;l=n[n.length-1].max?n[n.length-1].to:1/0,this.colors[t]={lastRangeIndex:r,minAmount:h,maxAmount:l,significantAmount:a,ranges:n},t!=lt.trade&&this.filters[lt.trade]||(this.minAmount=h)}prepareDisplaySettings(){const t=this.$store.state[this.paneId];this.maxHistory=t.maxRows,this.showHistograms=t.showHistograms,this.showPairs=t.showPairs,this.renderTrades=!t.showHistograms||this.height>window.innerHeight/24,this.showPrices=t.showPrices,this.offset=0,this.drawOffset=this.showHistograms?this.lineHeight:0}onResize(t,e,s){this.resize(),s||this.renderHistory()}resize(){const t=this.$refs.canvas;let e=0;this.$store.state.settings.autoHideHeaders||(e=2*(this.$store.state.panes.panes[this.paneId].zoom||1)*16),this.pxRatio=window.devicePixelRatio||1;const s=this.$store.state.panes.panes[this.paneId].zoom||1;this.width=t.width=this.$el.clientWidth*this.pxRatio,this.maxWidth=this.width/3,this.height=t.height=(this.$el.clientHeight-e)*this.pxRatio,this.padding=Math.round((s<1?1:s<1.5?2:4)*s*this.pxRatio),this.fontSize=Math.round(12*s*this.pxRatio),this.logoWidth=this.fontSize,this.lineHeight=Math.round(this.fontSize+this.padding),this.drawOffset=this.showHistograms?this.lineHeight:0,this.maxLines=Math.ceil(this.height/this.lineHeight),this.renderTrades=!this.$store.state[this.paneId].showHistograms||this.height>window.innerHeight/24,this.offset=this.offset||0,this.limit=this.offset+this.maxLines,this.ctx.font=`${s>1.25?"bold ":""}${this.fontSize}px Share Tech Mono`,this.ctx.textBaseline="middle"}getColors(t,e,s){const i=this.colors[s];for(let n=0;n<i.ranges.length;n++)if(n===i.lastRangeIndex||t<i.ranges[n].to){let s=rt-1;return t<i.ranges[n].to&&(s=Math.floor((t-i.ranges[n].from)/(i.ranges[n].to-i.ranges[n].from)*rt)),i.ranges[n][e][s]}}clear(){this.ctx.resetTransform();const t=getComputedStyle(document.documentElement),e=Object(d["l"])(t.getPropertyValue("--theme-base")),s=Object(d["l"])(t.getPropertyValue("--theme-background-base"),e);e[3]=.1,this.ctx.fillStyle=Object(d["j"])(Object(d["l"])(Object(d["j"])(e),s)),this.ctx.fillRect(0,0,this.width,this.height)}reset(){this.ctx&&this.clear(),this.tradesRendering=[],this.tradesHistory=[],this.volumeBySide={buy:0,sell:0},this.insignificantVolumeBySide={buy:0,sell:0},this.addedVolumeBySide={buy:0,sell:0},this.colors={},this.sounds={},this.offset=0,this.limit=0,this.maxCount=100,this.prepareDisplaySettings()}renderTradesBatch(){if(this.paused)return this.paused=this.tradesRendering.length,void(this.rendering=!1);let t=Math.ceil(.1*this.tradesRendering.length),e=0;while(t--&&++e<=this.batchSize){const t=this.tradesRendering.shift();if(this.renderTrades&&(this.renderTrade(t),this.offset>=1&&this.offset++),this.tradesHistory.unshift(t),this.tradesHistory.length>this.maxHistory){const t=this.tradesHistory.pop();this.addedVolumeBySide[t.side]&&(t.amount+=this.addedVolumeBySide[t.side],this.addedVolumeBySide[t.side]=0),this.volumeBySide[t.side]-=t.amount}}const s=Math.ceil(this.tradesRendering.length/10);return this.batchSize=s,this.rendering=this.tradesRendering.length>0,this.rendering?requestAnimationFrame(this.renderTradesBatch):void 0}renderTrade(t){const e=t.exchange+":"+t.pair,s=this.padding+Math.round(t.step/2*this.pxRatio),i=this.lineHeight+2*s;this.ctx.drawImage(this.ctx.canvas,0,i),this.ctx.fillStyle=t.background,this.ctx.fillRect(0,this.drawOffset,this.width,i),this.drawHistogram(t,i),this.ctx.fillStyle=t.color,this.drawLogo(t.exchange,2*this.padding,this.drawOffset+i/2-this.logoWidth/2),this.showPairs?this.drawPair(t,i):this.showPrices&&this.drawPrice(t,e,i),this.drawAmount(t,i,t.type===lt.liquidation),t.time&&this.drawTime(t,i)}drawTime(t,e){this.ctx.fillText(t.time,this.width-this.padding,this.drawOffset+e/2+1)}drawHistogram(t,e){this.ctx.fillStyle="rgba(255,255,255,0.05)",this.ctx.fillRect(0,0,Math.min(1,t.count/100)*this.width,this.drawOffset+e)}drawPair(t,e){this.ctx.textAlign="left",this.ctx.fillText(t.pair,this.padding+1.5*this.logoWidth,this.drawOffset+e/2+1,this.maxWidth)}drawPrice(t,e,s){this.ctx.textAlign="left",this.ctx.fillText(Object(l["d"])(t.price,e),this.padding+1.5*this.logoWidth,this.drawOffset+s/2+1,this.maxWidth)}drawAmount(t,e,s){this.ctx.textAlign="right",this.ctx.fillText(Object(l["c"])(t.amount)+(s?"buy"===t.side?"üêª":"üêÇ":""),this.width/(this.showPrices||this.showPairs?1.4:1.8),this.drawOffset+e/2+1,this.maxWidth)}renderHistory(){if(this.clear(),!this.renderTrades)return;ot&&this.renderDebug();const t=Math.round(this.offset),e=Math.round(this.limit);if(e-t<=0)this.ctx.fillText("waiting for trades",8,8);else for(let s=e-1;s>=t;s--)this.tradesHistory[s]&&this.renderTrade(this.tradesHistory[s])}renderVolumeBySide(){if(!this.showHistograms)return;const t=this.insignificantVolumeBySide.buy+this.insignificantVolumeBySide.sell,e=this.volumeBySide.buy+this.volumeBySide.sell,s=t+e,i=this.width*(this.volumeBySide.buy/s),n=this.width*(this.insignificantVolumeBySide.buy/s),a=this.width*(this.insignificantVolumeBySide.sell/s),o=this.width*(this.volumeBySide.sell/s),r=this.renderTrades?this.lineHeight:this.height;this.ctx.fillStyle=this.buyColorBase,this.ctx.fillRect(0,0,i,r),this.ctx.fillStyle=this.buyColor100,this.ctx.fillRect(i,0,n,r),this.ctx.fillStyle=this.sellColor100,this.ctx.fillRect(i+n,0,a,r),this.ctx.fillStyle=this.sellColorBase,this.ctx.fillRect(this.width-o,0,o,r)}renderDebug(){const t=this.width/4;this.ctx.fillStyle=this.buyColorBase,this.ctx.fillRect(0,0,t,this.lineHeight),this.ctx.fillStyle=this.buyColor100,this.ctx.fillRect(t,0,t,this.lineHeight),this.ctx.fillStyle=this.sellColor100,this.ctx.fillRect(2*t,0,t,this.lineHeight),this.ctx.fillStyle=this.sellColorBase,this.ctx.fillRect(3*t,0,t,this.lineHeight);for(const e in this.filters)if(this.filters[e])for(const t of this.colors[e].ranges)for(let e=0;e<t.buy.length;e++){this.ctx.translate(0,this.lineHeight);const s=t.buy[e];this.ctx.fillStyle=s.background,this.ctx.fillRect(0,0,this.width/2,this.lineHeight),this.ctx.fillStyle=s.color,this.ctx.textAlign="left",this.ctx.fillText("B:"+s.color,0,this.lineHeight/2);const i=t.sell[e];this.ctx.fillStyle=i.background,this.ctx.fillRect(this.width/2,0,this.width/2,this.lineHeight),this.ctx.fillStyle=i.color,this.ctx.textAlign="left",this.ctx.fillText("S: "+i.color,this.width/2,this.lineHeight/2)}this.ctx.resetTransform()}onBlur(){this.$el.removeEventListener("mouseleave",this.blurHandler),this.$el.removeEventListener("wheel",this.scrollHandler),delete this.scrollHandler,delete this.blurHandler,this.paused=0,this.offset=0,this.limit=this.maxLines,this.renderHistory(),this.renderTradesBatch()}onScroll(t){t.preventDefault();const e=Math.sign(t.deltaY)*(t.shiftKey?4:2),s=Math.max(0,Math.min(this.tradesHistory.length,this.offset+e)),i=Math.min(this.tradesHistory.length,Math.max(s+this.maxLines,this.limit+e)),n=Math.round(s)!==Math.round(this.offset);this.paused=s,this.offset=s,this.limit=i,n&&this.renderHistory()}bindScroll(){this.scrollHandler?this.onBlur():(this.paused=1,this.blurHandler=this.onBlur.bind(this),this.scrollHandler=this.onScroll.bind(this),this.$el.addEventListener("wheel",this.scrollHandler),this.$el.addEventListener("mouseleave",this.blurHandler))}drawLogo(t,e,s){if(ht[t])this.ctx.drawImage(ht[t],e,s,this.logoWidth,this.logoWidth);else{const e=document.createElement("canvas");e.width=this.logoWidth,e.height=this.logoWidth;const s=new Image;s.onload=()=>{const t=e.getContext("2d");t.drawImage(s,0,0,this.logoWidth,this.logoWidth)},s.src=at[t],ht[t]=e}}};dt=Object(a["a"])([Object(o["a"])({name:"TradesLite",components:{PaneHeader:p["a"],Slider:c["a"]}})],dt);var ct=dt,pt=ct,ut=(s("4471"),s("2877")),gt=Object(ut["a"])(pt,i,n,!1,null,"6b54ccc0",null);e["default"]=gt.exports},cbc7:function(t,e,s){t.exports=s.p+"img/BITMEX.447dea38.svg"},d1e0:function(t,e,s){t.exports=s.p+"img/OKEX.5d207793.svg"},d37d:function(t,e,s){t.exports=s.p+"img/BITSTAMP.31b40fd5.svg"},efac:function(t,e,s){t.exports=s.p+"img/BINANCE.485a12cb.svg"},f7bc:function(t,e,s){t.exports=s.p+"img/CRYPTOCOM.853e27d2.svg"},fb9f:function(t,e,s){t.exports=s.p+"img/KRAKEN.97298844.svg"},fd18:function(t,e,s){t.exports=s.p+"img/BITGET.f72a6998.svg"}}]);